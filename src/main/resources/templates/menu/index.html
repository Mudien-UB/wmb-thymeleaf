<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Menu List</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gray-50 text-gray-900">

<header th:replace="~{fragments/header :: header}"></header>

<section class="max-w-4xl min-h-screen flex flex-col item-center mx-auto mt-10 px-4 py-10">
    <h1 class="text-4xl font-bold text-center text-blue-600 mb-8">Menu List</h1>

    <div class="flex w-max mb-5 ">
        <button
                class="px-4 py-2 bg-blue-800 text-blue-50 rounded-md shadow font-semibold hover:bg-blue-700 transition"
                th:onclick="|window.location.href='/menu/add'|"
        >
            Add New
        </button>
    </div>
    <!-- When data exists -->
    <div th:if="${not #lists.isEmpty(menuList)}" class="overflow-x-auto rounded-lg shadow">
        <table class="min-w-full divide-y divide-gray-200 bg-white">
            <thead class="bg-blue-600">
            <tr class="text-center text-sm font-semibold text-white">
                <th class="px-4 py-3">ID</th>
                <th class="px-4 py-3">Name</th>
                <th class="px-4 py-3">Description</th>
                <th class="px-4 py-3">Price</th>
                <th class="px-4 py-3">Category</th>
                <th class="px-4 py-3">Action</th>
            </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
            <tr th:each="menu, iterStat : ${menuList}" class="hover:bg-gray-50 transition">
                <td class="px-4 py-2" th:text="${iterStat.index + 1}"></td>
                <td class="px-4 py-2" th:text="${menu.name}"></td>
                <td class="px-4 py-2" th:text="${menu.description}"></td>
                <td class="px-4 py-2" th:text="${@formatHelper.rupiah(menu.price)}"></td>
                <td class="px-4 py-2" th:text="${menu.menuCategory}"></td>


                <td class="px-4 py-2 text-center">
                    <button class="bg-green-500 text-white px-4 py-2 rounded"
                            th:onclick="|window.location.href='/menu/edit/${menu.id}'|">
                        Edit
                    </button>

                    <form th:action="@{'/menu/delete/' + ${menu.id}}" method="post"
                          onsubmit="return confirm('Are you sure you want to delete this menu?');"
                          style="display: inline;">
                        <input type="hidden" name="_method" value="delete" />
                        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded">
                            Delete
                        </button>
                    </form>

                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- When empty -->
    <p th:if="${#lists.isEmpty(menuList)}" class="text-center text-gray-500 mt-10">
        No menu available.
    </p>
</section>

<footer th:replace="fragments/footer :: footer"></footer>

<script>
    function confirmDelete(id) {
        if (confirm('Are you sure you want to delete this menu?')) {
            window.location.href = '/menu/delete/' + id;
        }
    }
</script>

</body>
</html>
